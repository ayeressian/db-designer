(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{246:function(e,t,n){"use strict";function o(e,t,n){const o=new Blob([e],{type:n});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(o,t);else{const e=document.createElement("a"),n=URL.createObjectURL(o);e.href=n,e.download=t,document.body.appendChild(e),e.click(),setTimeout(function(){document.body.removeChild(e),window.URL.revokeObjectURL(n)})}}n.r(t);var i=n(42),a=e=>{let t="";return e.tables.forEach((n,o)=>{let i="";n.columns.forEach((t,o)=>{if(t.fk){const n=e.tables.find(e=>e.name===t.fk.table).columns.find(e=>e.name===t.fk.column).type;i+="  "+t.name+" "+n}else i+="  "+t.name+" "+t.type;!0===t.uq&&(i+=" UNIQUE"),!0===t.nn&&(i+=" NOT NULL"),!0===t.pk&&(i+=" PRIMARY KEY"),t.fk&&(i+=" REFERENCES "+t.fk.table+"("+t.fk.column+")"),o<n.columns.length-1&&(i+=","),i+="\n"}),t+="CREATE TABLE "+n.name+"(\n"+i+");\n",o<e.tables.length-1&&(t+="\n")}),t};n.d(t,"default",function(){return c});const l={items:[{id:"file",title:"File",items:[{id:"new",title:"New Schema"},{id:"open",title:"Open Schema"},{id:"downloadSchema",title:"Download"}]},{title:"import/export",items:[{id:"exportSql",title:"Export SQL"},{id:"importSql",title:"Import SQL"}]},{id:"help",title:"Help",items:[{id:"reportIssue",title:"Report an issue"},{id:"about",title:"About"}]}],rightItems:[{id:"gitHub",title:"GitHub"},{id:"downloadApp",title:"Download"}]};function c(e,t){const n=document.querySelector("menu-bar"),c=document.getElementById("file_open"),s=document.getElementById("db_schema_file_open"),d=document.querySelector("choose-db-dialog");Object(i.b)(c,t),Object(i.a)(s,t,()=>d.getDbType());n.addEventListener("select",async n=>{switch(n.detail){case"new":if(e().tables.length>0&&window.confirm("Do you want to create a new schema? All the unsaved progress will be lost.")){const e=document.querySelector("choose-db-dialog"),n=await e.getDbType();null!=n&&t({tables:[],dbType:n})}break;case"open":c.click();break;case"downloadSchema":o(JSON.stringify(e()),"schema.json","application/json");break;case"exportSql":(()=>{const t=e();o(a(t,t.dbType),"schema.sql","text/plain")})();break;case"importSql":s.click();break;case"gitHub":window.open("https://github.com/ayeressian/dbgrapher","_blank").focus();break;case"reportIssue":window.open("https://github.com/ayeressian/dbgrapher/issues","_blank").focus()}}),n.config=l}}}]);
//# sourceMappingURL=13.bundle.js.map